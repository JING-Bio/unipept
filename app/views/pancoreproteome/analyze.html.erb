<h1>Pan and core proteome</h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas nunc felis, sodales vel scelerisque nec, viverra sit amet elit. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent a ligula ut erat pharetra hendrerit. Vivamus ac mauris massa, a rutrum felis. Mauris placerat massa ut neque lacinia sed consectetur nisi mattis. Aenean arcu nunc, eleifend eu tincidunt sit amet, congue a augue. Sed sed eleifend nisi. Vestibulum ac eros vel velit fringilla aliquam. Pellentesque ipsum leo, suscipit quis fermentum mollis, adipiscing nec libero. Phasellus sed est libero. In hac habitasse platea dictumst. Donec id orci dui, ut rhoncus libero. Fusce consequat risus in felis luctus iaculis porttitor dui luctus. Ut lobortis neque eget neque fermentum quis lacinia felis rutrum.</p>

<div id="buttons-pancore"></div>

<div id="pancore_graph"></div>

<div class="split">
  <div class="split-left">
    <p class="intro">
      Select a species for which you want to analyze the proteome and click the load button.
    </p>
    <%= form_tag(:pancore_analyze, :method => "get", :class => "form-inline") do %>
    <%= select_tag(:species_id, options_for_select(@species, params[:species_id])) %>
    <%= button_tag(raw("Load species <i class='icon-chevron-right icon-white'></i>"), :type => "button", :class => "btn btn-primary", :id => "load_species_proteome", :"data-loading-text" => "Loading...") %>
    <% end %>
    <div id="treeView">
      <div class="input-append" id="treeSearchDiv">
      <%= search_field_tag(:treeSearch, "", :placeholder => "type to filter the tree by name or bioproject id") %><span class="add-on"><i class="icon-search"></i></span>
      </div>
    </div>
  </div>

  <div class="split-right">
    <span id="table-message"><i class="icon-chevron-left"></i> Select a species to analyze and click the load button.</span>
    <div id="genomes_table_div">
      <div style="overflow: hidden; height: 0px; width: 0px;">&nbsp;</div>
      <table class="table table-condensed" id="genomes_table">
        <thead>
          <tr>
            <th class="handle">
              <div class="btn-group" id="autosort">
                <a class="btn btn-mini btn-primary dropdown-toggle" data-toggle="dropdown" id="autosort-button">
                  <i class="icon-random icon-white"></i>
                </a>
                <ul class="dropdown-menu">
                  <li><a data-type="name" data-toggle="tooltip" title="Sorts the genomes alphabetically from A-Z." href="#">Sort by name</a></li>
                  <li><a data-type="size" data-toggle="tooltip" title="Sorts the genomes by the number of peptides from high to low." href="#">Sort by genome size</a></li>
                  <li><a data-type="minpan" data-toggle="tooltip" title="Heuristically minimizes the pan line. Starts from the current first node." href="#">Minimize the pan</a></li>
                  <li><a data-type="maxcore" data-toggle="tooltip" title="Heuristically maximizes the core line. Starts from the current first node." href="#">Maximize the core</a></li>
                  <li><a data-type="optimal" data-toggle="tooltip" title="Heuristically minimizes the distance between the pan and core line. Starts from the current first node." href="#">Optimize pan and core</a></li>
                </ul>
              </div>
            </th>
            <th class="name">Genome</th>
            <th class="status">Status</th>
            <th class="action"><a id="remove-all" class="btn btn-mini btn-danger" title="remove all genomes"><i class="icon-trash icon-white"></i></a></th>
          </tr>
        </thead>
        <tbody>
          <tr>
          </tr>
        </tbody>
        <tfoot>
          <tr><th colspan=4>drop genomes here to add them</th></tr>
        </tfoot>
      </table>
    </div>
    <div class="visualClear"></div>
  </div>
</div>

<script type="text/javascript">
  $(function () {
    if (typeof(Worker)!=="undefined") {
      init_pancore();
      init_selection_tree(<%= raw(@genomes) %>, <%= raw(@taxa) %>);
    } else {
      error(null, "Sorry, this page uses Web Workers, an advanced JavaScript technology that's not supported by your browser. Try using an up to date version of Google Chrome, Firefox or Internet Explorer 10.")
    }
  });
</script>

<%= render 'shared/save_image_modal' %>
