<%=
  if @extra_info
    Oj.dump(
      @result[:ec][:output].map do |k, v|
        {
          "peptide" => k,
          "ec" => v.sort_by { |_key, value| -value }.map do |k1, v1|
            {
              "proteins" => v1,
              "ec_number_code" => k1,
              "name" => @result[:ec][:ec_mapping][k1]
            }
          end,
          "go" => @result[:go][:output][k].sort_by { |_key, value| -value }.map do |k1, v1|
            {
              "proteins" => v1,
              "go_term_code" => k1,
              "name" => @result[:go][:go_mapping][k1]
            }
          end
        }
      end
    ).html_safe
  else
    Oj.dump(
      @result[:ec][:output].map do |k, v|
        {
          "peptide" => k,
          "ec" => v.sort_by { |_key, value| -value }.map do |k1, v1|
            {
              "proteins" => v1,
              "ec_number_code" => k1
            }
          end,
          "go" => @result[:go][:output][k].sort_by { |_key, value| -value }.map do |k1, v1|
            {
              "proteins" => v1,
              "go_term_code" => k1
            }
          end
        }
      end
    ).html_safe
  end
%>
